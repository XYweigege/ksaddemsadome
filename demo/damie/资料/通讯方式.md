# 通讯方式

 无界传参 

1.我们之前讲过无界的架构子应用的js是存放在iframe的，既然是iframe就可以通过window进行通讯，

主应用定义一个全局变量

```
var a = 'dawei'
```



子应用通过 window.parent.a 就可以访问到



```
const getData = () => {
  console.log(alert(window.parent.a))
}
```



2.通过props给子应用注入参数

```
<WujieVue :props="{name:'dawei',age:18}"  url="http://127.0.0.1:5175/" name="vue3"></WujieVue> <!--子应用vue3-->
```



子应用可以通过[$wujie](https://wujie-micro.github.io/doc/api/wujie.html#wujie-props)来获取：

```
window.$wujie.props
```



如果报错$wujie 可以添加声明文件

```
declare global {
  interface Window {
    $wujie:{
      props:Record<string,any>
        }
  }
}
```



3.event bus

主应用通过bus 监听

```
import {bus} from 'wujie'
bus.$on('vue3', (data: any) => {
  console.log(data)
})
```



子应用通过emit触发事件（反之也可以 主应用emit触发子应用on监听）

```
window.$wujie.bus.$emit('vue3', {name:'xm',age:18})
```

