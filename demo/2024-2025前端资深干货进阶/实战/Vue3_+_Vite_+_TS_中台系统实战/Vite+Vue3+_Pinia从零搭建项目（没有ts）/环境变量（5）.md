### åˆ›å»ºç¯å¢ƒå˜é‡
<br/>color1
ç®€å•åˆ›å»ºå¼€å‘ç¯å¢ƒ.env.developmentå’Œç”Ÿäº§ç¯å¢ƒ.env.productionä¸¤ä¸ªç¯å¢ƒå˜é‡çš„é…ç½®æ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„çš„ç¯å¢ƒå˜é‡åéœ€è¦ä»¥VITE_å¼€å§‹ã€‚

<br/>

```markdown
# æ˜¯å¦åŠ è½½æœ¬åœ°èµ„æºï¼ˆä¸èµ°APIï¼‰
VITE_API_ISLOCAL = false

# APIè¯·æ±‚åœ°å€
VITE_API_BASEURL = http://192.168.1.1:9528/

```

### ä½¿ç”¨ç¯å¢ƒå˜é‡
åœ¨viteä¸­å¯¹ç¯å¢ƒå˜é‡å¤„ç†ä¾èµ–äºdotEnvç¬¬ä¸‰æ–¹åº“ï¼Œviteä¸­å†…ç½®äº†è¿™ä¸ªç¬¬ä¸‰æ–¹å¾—åº“ï¼ŒdotEnvä¼šè¯»å–.envæ–‡ä»¶ï¼Œå¹¶è§£æè¿™ä¸ªæ–‡ä»¶ä¸­å¯¹åº”çš„ç¯å¢ƒå˜é‡ï¼Œç„¶åå°†å…¶æ³¨å…¥processå¯¹è±¡ä¸‹ã€‚ä¸€èˆ¬ä½¿ç”¨æ–¹æ³•ä¸ºimport.meta.env.VITE_API_ISLOCALï¼Œç‰¹æ®Šçš„åœ°æ–¹åœ¨vite.config.jsä¸­éœ€è¦æœ‰ç‰¹æ®Šçš„å¤„ç†æ–¹å¼ã€‚

```javascript

// éœ€è¦è°ƒç”¨loadEnv
import { defineConfig, loadEnv } from 'vite'

export default defineConfig(({ command, mode }) => {
  // èµ‹å€¼
  const env = loadEnv(mode, process.cwd(), '')
  return {
    server: {
      proxy: {
        '^/api': {
          target: env.VITE_API_BASEURL // å¼•ç”¨
        }
      }
    }
  }
})

```

### è‡ªå®šä¹‰æŒ‡ä»¤
```javascript

import { useUserStore } from '@/pinia'
import { isLocal } from '@/utils/helper'

export default {
  install(app) {
    // æ™®é€šçš„æŒ‰é’®æƒé™ï¼ˆä¸€ä¸ªæŒ‰é’®å¯¹åº”ä¸€ä¸ªbuttonå€¼ï¼‰
    app.directive('permission', {
      mounted(el, binding) {
        if (!binding.value || isLocal()) return false
        const userStore = useUserStore()
        if (!userStore.buttons.includes(binding.value)) {
          el.parentNode.removeChild(el)
        }
      }
    })
    // å¤šå¯¹ä¸€çš„æŒ‰é’®æƒé™ï¼ˆå¤šä¸ªbuttonå€¼æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºä¾‹å¦‚ä¸‹æ‹‰èœå•ã€è¡¨æ ¼åé¢çš„æ“ä½œæ ç­‰ç­‰ï¼‰
    app.directive('permissions', {
      mounted(el, binding) {
        if (!binding.value || isLocal()) return false
        const userStore = useUserStore()
        let flag = false
        for (const item of binding.value) {
          if (userStore.buttons.includes(item)) {
            flag = true
            return
          }
        }
        if (!flag) el.parentNode.removeChild(el)
      }
    })
  }
}

```

### åˆ›å»ºå…¬å…±ç»„ä»¶åº“
```markdown
â”œâ”€ ğŸ“src
â”‚  â”œâ”€ ğŸ“components
â”‚  â”‚  â”œâ”€ ğŸ“FtIcon
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„index.js
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„index.jsx

```

<font style="color:rgb(43, 43, 43);">è¿™é‡Œå±•ç¤ºä¸€ä¸ªå¤šå›¾æ ‡åº“çš„é›†æˆï¼ˆiconfont+elementPlusï¼‰ã€‚</font>

<font style="color:rgb(43, 43, 43);">è¿™é‡Œåªæ˜¯ä¸€ä¸ªç®€å•çš„å¯¼å‡ºã€‚</font>

```javascript

import FtIcon from './index.jsx'
export default FtIcon

```

<font style="color:rgb(43, 43, 43);">ä¸»ä½“éƒ¨åˆ†</font>

```javascript

// elementPluså®˜æ–¹çš„ä½¿ç”¨æ–¹å¼el-icon + ç»„ä»¶
const ElementPlusIcon = (name, size, color, className) => (
  <el-icon class={[className, 'ft-icon']} size={size} color={color}>
    {h(resolveComponent(name))}
  </el-icon>
)
// ä¼ ç»Ÿçš„ä½¿ç”¨æ–¹å¼ï¼Œiæ ‡ç­¾+classå
const OtherIcon = (name, size, color, className) => <i class={[className, `ft-icon ${name}`]} style={`font-size:${size}; color: ${color};vertical-align: middle;`}></i>

export default defineComponent({
  name: 'FtIcon', // ç»„ä»¶åï¼šå…³é”®ç‚¹ï¼Œå¼•ç”¨çš„ç»„ä»¶åéƒ½æ˜¯æ¥è‡ªè¿™é‡Œ
  props: {
    name: { // iconçš„åç§°ï¼ŒelementPlusçš„å‰åŠ el-icon
      type: String,
      required: true
    },
    size: { // å­—ä½“å¤§å°
      type: String,
      default: ''
    },
    color: { // å­—ä½“é¢œè‰²
      type: String,
      default: ''
    },
    class: { // é™„åŠ class
      type: String,
      default: ''
    }
  },
  setup(props) {
    if (props.name.indexOf('el-icon') === 0) {
      return () => ElementPlusIcon(props.name.split('el-icon ')[1], props.size, props.color, props.class)
    } else {
      return () => OtherIcon(props.name, props.size, props.color, props.class)
    }
  }
})

```

### è‡ªåŠ¨æ‰¹é‡å¯¼å…¥
å°†æ”¾å…¥componentsæ–‡ä»¶å¤¹ä¸‹é¢çš„ç»„ä»¶è‡ªåŠ¨æ³¨å†Œåˆ°å…¨å±€ã€‚

```javascript
// å¼•å…¥elementPluså›¾æ ‡åº“ï¼ˆä»…ä»…æ˜¯ä¸Šä¸€æ­¥å…¶å®æ²¡æœ‰å¯¼å…¥elementçš„iconï¼‰
import { ElIcon } from 'element-plus'
import * as ElementPlusIconsVue from '@element-plus/icons-vue'

// å¼•å…¥ç»„ä»¶åº“
const components = import.meta.glob('@/components/*/index.js', { eager: true })

export default {
  install(app) {
    // ç»„ä»¶æ— æ³•è¯†åˆ«çš„el-iconç»„ä»¶é»„è‰²è­¦å‘Šï¼ˆåŠ ä¸åŠ éƒ½ä¸å½±å“ç»„ä»¶æ¸²æŸ“ï¼‰
    app.component('ElIcon', ElIcon)
    // æ³¨å†ŒelementPlusçš„iconå›¾æ ‡
    Object.entries(ElementPlusIconsVue).forEach(([key, component]) => {
      app.component(key, component)
    })
    
    // å°†componentsé‡Œçš„ç»„ä»¶éƒ½è‡ªåŠ¨æ³¨å†Œ
    Object.keys(components).forEach(key => {
      const component = components[key].default
      app.component(component.name, component)
    })
  }
}

```

<font style="color:rgb(43, 43, 43);">æ— éœ€å¼•ç”¨ï¼Œç›´æ¥åœ¨templateä½¿ç”¨å³å¯ã€‚</font>

```javascript
<tempalte>
  <div>
    <ft-icon name="el-icon Search"></ft-icon>
    <FtIcon name="el-icon Search" color="#fff000" size="100px"></FtIcon>
    <ft-icon name="iconfont icon-search" color="#ff0000" size="24px" class="big-icon"/>
  </div>
</template>

```

### layoutå¸ƒå±€
<font style="color:rgb(43, 43, 43);">æ ‡å‡†çš„layoutå¸ƒå±€åº”è¯¥åŒ…å«å¤´éƒ¨æ ï¼Œä¾§è¾¹å¯¼èˆªæ ï¼Œæ ‡ç­¾å¯¼èˆªæ ï¼Œä¸»ä½“éƒ¨åˆ†ã€‚</font>

```markdown
â”œâ”€ ğŸ“src
â”‚  â”œâ”€ ğŸ“layout
â”‚  â”‚  â”œâ”€ ğŸ“AppHeader
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„index.vue
â”‚  â”‚  â”œâ”€ ğŸ“AppMain
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„index.vue
â”‚  â”‚  â”œâ”€ ğŸ“Siderbar
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„index.vue
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„MenuItem.vue
â”‚  â”‚  â”œâ”€ ğŸ“TagsView
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„index.vue
â”‚  â”‚  â”œâ”€ ğŸ“„index.vue

```

```markdown
<template>
  <div class="g-app-container">
    <AppHeader />
    <div class="g-app-container-content">
      <Sidebar />
      <div class="g-app-container-right">
        <TagsView />
        <AppMain />
      </div>
    </div>
  </div>
</template>

<script setup>
import AppHeader from './AppHeader/Index.vue'
import Sidebar from './Siderbar/Index.vue'
import TagsView from './TagsView/Index.vue'
import AppMain from './AppMain/Index.vue'
</script>
</style>

```

```markdown

<template>
  <el-scrollbar ref="scrollbarRef">
    <div class="g-app-main">
      <router-view v-slot="{ Component }">
        <transition name="fade" mode="out-in">
          <component :is="Component" />
        </transition>
      </router-view>
    </div>
  </el-scrollbar>
</template>

```

```markdown

<template>
  <div class="g-app-sider" :class="{ collapse: appStore.isCollapse }">
    <div class="g-app-sider-content">
      <el-scrollbar>
        <el-menu :default-active="activeMenu" :collapse="appStore.isCollapse" class="g-sider-menu">
          <MenuItem :menus="userStore.routes"></MenuItem>
        </el-menu>
      </el-scrollbar>
    </div>
    <div class="g-app-sider-footer">
      <div class="toggle-sider">
        <template v-if="appStore.isCollapse">
          <ft-icon name="el-icon Expand" size="20" @click="toggleSider"></ft-icon>
        </template>
        <template v-else>
          <ft-icon name="el-icon Fold" size="20" @click="toggleSider"></ft-icon>
        </template>
      </div>
    </div>
  </div>
</template>

<script setup>
import MenuItem from './MenuItem.vue'
import { useAppStore, useUserStore } from '@/pinia'

const appStore = useAppStore()
const userStore = useUserStore()

const route = useRoute()
const activeMenu = computed(() => {
  return route.meta.activePath || route.path
})

const toggleSider = () => {
  appStore.toggleCollapse()
}
</script>

```

```markdown

<template>
  <template v-for="item in menus" :key="item.path">
    <el-sub-menu v-if="hasChildren(item)" :index="item.path">
      <template #title>
        <ft-icon v-if="item.meta.icon" class="el-icon" :name="item.meta.icon" size="20px"></ft-icon>
        <span class="nav-title">{{ item.meta.title }}</span>
      </template>
      <menu-item :menus="item.children"></menu-item>
    </el-sub-menu>
    <el-menu-item v-else :index="item.path" @click="linkTo(item.path)">
      <ft-icon v-if="item.meta.icon" class="el-icon" :name="item.meta.icon" size="20px"></ft-icon>
      <span class="nav-title">{{ item.meta.title }}</span>
    </el-menu-item>
  </template>
</template>

<script setup>
defineProps({
  menus: {
    type: Array,
    default: () => []
  }
})
const hasChildren = val => {
  let flag = false
  if (Array.isArray(val.children) && val.children.length > 0) {
    for (const item of val.children) {
      if (item.visible !== false) {
        flag = true
        break
      }
    }
  }
  return flag
}

const router = useRouter()

const linkTo = path => {
  router.push(path)
}
</script>

```

æ•´ä½“å¸ƒå±€ï¼Œæ¯ä¸ªå›¢é˜Ÿé£æ ¼ä¸ä¸€æ ·ï¼Œ å¤§å·®ä¸å¤§

```markdown
â”œâ”€ ğŸ“src
â”‚  â”œâ”€ ğŸ“views
â”‚  â”‚  â”œâ”€ ğŸ“Login                              ç™»å½•é¡µ
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„Index.vue
â”‚  â”‚  â”œâ”€ ğŸ“Dasheboard                         é¦–é¡µ
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“components                      é¦–é¡µçœ‹æ¿ç”¨åˆ°çš„å¤æ‚ç»„ä»¶å¦‚å›¾è¡¨ä¹‹ç±»çš„éƒ½æ”¾åœ¨åŒç›®å½•ä¸‹çš„componentæ–‡ä»¶å¤¹å†…
â”‚  â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„Line.vue
â”‚  â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„Pie.vue
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„index.vue
â”‚  â”‚  â”œâ”€ ğŸ“TablePage                          ç»å…¸è¡¨æ ¼é¡µé¢
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“dialog                          è¡¨æ ¼é¡µé¢ç›¸å…³çš„å¼¹çª—éƒ½æ”¾åŒç›®å½•ä¸‹çš„dialogæ–‡ä»¶å¤¹é‡Œ
â”‚  â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„Edit.vue
â”‚  â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„Detail.vue
â”‚  â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„Config.vue
â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„index.vue

```

